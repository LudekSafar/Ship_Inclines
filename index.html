<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lodní Logger - MAX</title>
    <style>
      body { font-family: sans-serif; background: #111; color: #eee; text-align: center; padding: 20px; }
      .box { border: 1px solid #444; padding: 15px; margin-bottom: 15px; border-radius: 10px; background: #222; }
      .val { font-size: 2em; color: #0f0; font-weight: bold; font-variant-numeric: tabular-nums; }
      .label { color: #aaa; font-size: 0.8em; text-transform: uppercase; margin-bottom: 5px; }
      
      button { width: 100%; padding: 20px; font-size: 1.2em; background: #444; color: white; border: none; border-radius: 5px; margin-bottom: 10px; cursor: pointer; }
      #btnStart { background: #28a745; display: none; }
      #btnStop { background: #dc3545; display: none; }
      
      .status { font-size: 0.8em; color: #aaa; margin-top: 5px; }
    </style>
  </head>
  <body>

    <h2>Logger + MAX (v3.7)</h2>
    <div id="backend-version" style="font-size: 0.8em; color: #555; margin-bottom: 10px;">
      Verze serveru: <span style="color: orange;">Ověřuji...</span>
    </div>

    <div class="box">
      <div class="label">G-Force (Aktuální / Minutové MAX)</div>
      <div>
        <span id="gVal" class="val">0.00</span> / 
        <span id="gMaxVal" class="val" style="color:orange; font-size:1.5em">0.00</span>
      </div>
      
      <div style="margin-top:15px; display: grid; grid-template-columns: 1fr 1fr;">
        <div>
           <div class="label">Náklon X</div>
           <span class="val" id="betaVal">0</span>°
        </div>
        <div>
           <div class="label">Náklon Y</div>
           <span class="val" id="gammaVal">0</span>°
        </div>
      </div>
    </div>

    <div class="box">
      <div class="label">Stav odesílání</div>
      <div id="status" class="status">Čekám na start...</div>
      <div style="margin-top:5px; font-size: 0.8em;">
        Raw Buffer: <span id="bufSize">0</span> | Max Buffer: <span id="maxBufSize" style="color:orange">0</span>
      </div>
    </div>

    <button id="btnPerm" onclick="askPerm()">1. Povolit Senzory</button>
    <button id="btnStart" onclick="start()">2. START MĚŘENÍ</button>
    <button id="btnStop" onclick="stop()">UKONČIT</button>

    <script src="script.js"></script>
    
  </body>
</html>